<html>
  <body>
    <script src="promisejs/promise.js"></script>
    <script src="pdftex.js"></script>

    <script>
      var pdftex = new PDFTeX("pdftex-worker.js");

      var source_code = ''
      + '\\documentclass{article}'
      + '\\usepackage[a4paper]{geometry}'
      + '\\title{An Example Document}'
      + '\\begin{document}'
      + '\\maketitle'
      + '\\end{document}';

      var start_time = new Date().getTime();
      pdftex.compile(source_code).then(function() {
        pdftex.FS_getFile('/input.pdf').then(function(data) {
          var end_time = new Date().getTime();
          console.log("Execution time: " + (end_time-start_time)/1000+' sec');

          var data_url = 'data:application/pdf;charset=binary;base64,'
            + btoa(String.fromCharCode.apply(null, data));
          console.log(data_url);
        });
      })

    </script>
  </body>
</html>
